# `dfMaker`

![](logo_dfMaker.png)

![](table_dfMaker.jpeg)


`dfmaker` is a function that allows `OpenPose' to structure massive amounts of data and also provides the ability to obtain csv or parquet files for further analysis.
| :warning: WARNING                                                                                                                                       |
|:-----------------------------------------------------------------------|
| `extra.var=TRUE` requieres the next strutre on names to work *2020-02-21_2100_US_CNN_The_Lead_With_Jake_Tapper_1244-1250_subsequently.mp4*

**date_name_cut-Time_expression-searched.mp4**
 |

## Documentation

Reference manual: [dfMaker.pdf (PDF)](docs/dfMaker.pdf) Lang: :es:

## Function atributes

dfMaker(input.folders = "/home/user/outPutOpenPoseFolder/",
        save.csv = TRUE,
        output.folder = "/home/user/saveHereCSV", 
        return.empty = TRUE,
        extra.var= TRUE,
        save.parquet=TRUE,
          )

-   `input.folders`: Path to `JSON` files generated by `OpenPose` from videos.

-   `save.csv`: Boolean variable to save the output in `.csv` format (`TRUE`/`FALSE`).

-   `output.folder`: In case `save.csv = TRUE` a path to save files must be provided.

-   `return.empty`: Boolean variable (`TRUE`/`FALSE`) to get empty frames. It generates a list with the video's name and the number of empty frame.

-   `extra.var`: Boolean variable (`TRUE`/`FALSE`) to add variables from file names (`date` and `words`).

-   `save.parquet`: Boolean variable to save the output in [`.parquet`](https://github.com/apache/parquet-format) format  (`TRUE`/`FALSE`).

-   `type.point`: If you only want the 25 pose_keypoints `type.point = "pose"`.


## Â¿Why Parquet?

 [.parquet](https://github.com/apache/parquet-format) files are about 10 times smaller than .csv files, making it a great format for storing large amounts of data for further analysis.
 
 Just a note. You need to install the [`arrow`] package (https://arrow.apache.org/docs/r/)!
 
 On the other hand, if `arrow` is installed, [`jsonlite`](https://cran.r-project.org/web/packages/jsonlite/index.html) is not required. The objects generated by both methods are the same: [modification corroboration](bonus_material/jsonliteVsArrow.R) 



## On the source

The `type.point` attribute has been created to allow the use of the OpenPose [`pose_25b`](https://github.com/CMU-Perceptual-Computing-Lab/openpose_train/blob/master/experimental_models/README.md) model, which has a lower error rate than the standard model. The idea of this section is to be able to efficiently implement the latest developer models in ongoing research.


At the moment you can work with all points or only with pose_keypoints:

* `type.point = "full` full set (pose, face, handL and handR) 

* `type.point = "pose"` pose_keypoints only.

 Let's go to Open big data together! :ghost:
